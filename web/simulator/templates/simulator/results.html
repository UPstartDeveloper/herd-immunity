{% extends "simulator/base.html" %}

<!-- user sees results of the simulation -->
{% block content %}

    <h1>And the Results Are In!</h1>
    <h2>Did your population survive the epidemic?</h2>
    <hr
    <!-- display initial settings of simulation -->
    <h3>Initial Conditions</h3>
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <strong>Population Stats:</strong>
                <ul>
                    <li>
                        Time Step 0
                    </li>
                    <li>
                        Population Size: {{ experiment.population_size }}
                    </li>
                    <li>
                        Initially Infected: {{ experiment.initial_infected }}
                    </li>
                    <li>
                        Vaccinated Percentage: {{ experiment.vaccination_percent }}
                    </li>
                    <li>
                        Dead: 0
                    </li>
                </ul>
            </div>
            <div class="col-md-6">
                <strong>Virus Stats:</strong>
                <ul>
                    <li>
                        Name: {{ experiment.virus_name }}
                    </li>
                    <li>
                        Reproductive Rate: {{ experiment.reproductive_rate }}
                    </li>
                    <li>
                        Mortality Rate: {{ experiment.mortality_chance }}
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <hr>
    <h3>Final Results:</h3>
    <p>The experiment ended after <strong>{{ time_steps|length }} turn{{ time_steps|length|pluralize:"s" }}.</strong></p>
    <!-- display time steps -->
    <hr>
    <h3>Progression</h3>
    <p>What happened at each stage of the epidemic?</p>
    {% for time_step in time_steps %}
    <strong>Stats for Time Step: {{ time_step.step_id }}</strong>
    <ul>
        <li>
            <!-- Show bar charts, and pie charts -->
            <img src="#" alt="Plot Coming Soon">
        </li>
        <li>
            Total Infected: {{ time_step.total_infected }} <br>
        </li>
        <li>
            Current Infected: {{ time_step.current_infected }}
        </li>
        <li>
            Vaccination Percentage: {{ time_step.vaccinated_population }}
        </li>
        <li>
            Dead: {{ time_step.dead }}
        </li>
        <li>
            Total Vaccinated: {{ time_step.total_vaccinated }}
        </li>
        <li>
            Total Alive: {{ time_step.alive  }}
        </li>
        <li>
            Unifected individuals: {{ time_step.uninfected }}
        </li>
        <li>
            Uninteracted individuals: {{ time_step.uninteracted }} <br>
        </li>
    </ul>
    {% endfor %}
    <hr>
    <h3>Notes:</h3>
    <ol>
        <li>
            "Uninteracted": meaning individuals alive, not vaccinated, and not infected.
        </li>
        <li>
            "Total infected": although displayed in each time step, this value is<br>
             culmulative for the entire duration of the experiment.
        </li>
    </ol>
    <!-- link to start another simulation -->
    <div class="offset-md-5">
        <a href="/" class="btn btn-primary">Back to Home</a>
    </div>
    <br><br>

{% endblock %}
